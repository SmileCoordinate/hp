<!DOCTYPE html>
<html lang="ja">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>ãƒ’ã‚¢ãƒªãƒ³ã‚° form</title>
   <link rel="stylesheet" href="styles.css">
</head>
<style>
   /* å…¨ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ« */
   body {
      font-family: 'Arial', sans-serif;
      background-color: #f4f4f4;
      text-align: center;
      margin: 0;
      padding: 0;
   }

   /* ã‚³ãƒ³ãƒ†ãƒŠ */
   .container {
      width: 90%;
      max-width: 600px;
      background: white;
      padding: 20px;
      margin: 30px auto;
      border-radius: 10px;
      box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
   }

   /* ã‚¿ã‚¤ãƒˆãƒ« */
   h2 {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 10px;
   }

   /* è³ªå•ã®ãƒ†ã‚­ã‚¹ãƒˆ */
   p {
      font-size: 18px;
      font-weight: bold;
      color: #333;
      margin-bottom: 15px;
   }

   /* ãƒ•ã‚©ãƒ¼ãƒ å†…ã®è³ªå•ãƒ–ãƒ­ãƒƒã‚¯ */
   #questionContainer {
      text-align: left;
      margin-bottom: 20px;
   }

   /* è³ªå•ãƒ©ãƒ™ãƒ« */
   label {
      display: block;
      font-size: 16px;
      font-weight: normal;
      color: #555;
      margin-top: 10px;
   }

   /* ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› */
   input[type="text"] {
      width: 100%;
      padding: 10px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 16px;
   }

   /* ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³ */
   input[type="radio"] {
      margin-right: 5px;
   }

   label input[type="radio"] {
      transform: scale(1.2);
   }

   /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */
   .navigation {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
   }

   button {
      width: 48%;
      padding: 12px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: 0.3s;
   }

   /* æˆ»ã‚‹ãƒœã‚¿ãƒ³ */
   #prevBtn {
      background-color: #ddd;
      color: #333;
   }

   /* æ¬¡ã¸ãƒœã‚¿ãƒ³ */
   #nextBtn {
      background-color: #007bff;
      color: white;
   }

   /* ãƒœã‚¿ãƒ³ã®ãƒ›ãƒãƒ¼ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
   button:hover {
      opacity: 0.8;
   }
</style>

<body>

   <div class="container">
      <h2>æ‚©ã¿ã®å…±æœ‰ã‚¢ãƒ³ã‚±ãƒ¼ãƒˆ</h2>
      <p>ã“ã‚Œã‹ã‚‰ã®è³ªå•ã®å›ç­”å†…å®¹ã¯ç´„1ã‚«æœˆé–“ä¿ç®¡ã„ãŸã—ã¾ã™ã€‚</p>

      <form id="surveyForm">
         <div id="questionContainer"></div>

         <!-- ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
         <div class="navigation">
            <button type="button" id="prevBtn" onclick="prevQuestion()">æˆ»ã‚‹</button>
         </div>


      </form>
   </div>

   <script>
      const GAS_URL = "https://script.google.com/macros/s/AKfycbyukZt0iZ4s-DnPrtBDcvIbS7qmRpiZO2BfklohUe2iLm8MbY87E0Nu0L_KAvEYyGut/exec";

      //è³ªå•ãŒé€²ã¾ãªã„
      const questions = [
         {
            id: 1,
            text: "ã‚ãªãŸã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„",
            fields: [
               { label: "ä¾é ¼ä¸»ã®æ°å", type: "text", id: "name", required: true },
               { label: "æ€§åˆ¥", type: "radio", id: "gender", options: ["ç”·æ€§", "å¥³æ€§"], required: true },
               { label: "å¹´é½¢", type: "select", id: "age", options: ["é¸æŠã—ã¦ãã ã•ã„", "10ä»£", "20ä»£", "30ä»£", "40ä»£", "50ä»£", "60ä»£", "70ä»£", "80ä»£", "90ä»£"], required: true },
               { label: "åˆ¶ä½œã‚„ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ã‚’ä¾é ¼äºˆå®šã§ã™ã‹ï¼Ÿ", type: "radio", id: "consultation", options: ["ã¯ã„ï¼ˆä¾é ¼ã—ãŸã„ï¼‰", "ã„ã„ãˆï¼ˆè¦‹ç©ã®ã¿ï¼‰", "æ¤œè¨ä¸­ï¼ˆè¦‹ç©ã®ä¾¡æ ¼ã‚„å†…å®¹æ¬¡ç¬¬ã§ä¾é ¼ã—ãŸã„ï¼‰"], required: true }
            ],
            next: 2
         },
         {
            id: 2,
            text: "ä»Šã€å›°ã£ã¦ã„ã‚‹ã“ã¨ã‚„æ‚©ã¿äº‹ã¯ã‚ã‚Šã¾ã™ã‹",
            type: "radio",
            options: ["ã¯ã„", "ã„ã„ãˆ"],
            required: true,
            next: 3
         },
         {
            id: 3,
            text: "ã“ã®ä¸­ã§æ‚©ã‚“ã§ã„ã‚‹äº‹ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ<br>æ‚©ã¿ãŒã‚ã‚Œã°æ•™ãˆã¦ãã ã•ã„ã€‚",
            type: "radio",
            options: ["äººé–“é–¢ä¿‚", "å­è‚²ã¦", "æ•™è‚²", "ä»•äº‹é–¢é€£", "ãã®ä»–"],
            required: true,
            next: 4
         },

         {
            id: 4,
            text: "ã©ã‚“ãªã“ã¨ã§æ‚©ã‚“ã§ã„ã‚‹ã®ã‹æ•™ãˆã¦ãã ã•ã„ğŸ™ğŸ»",
            type: "text",
            placeholder: "ã“ã“ã«å…¥åŠ›ã—ã¦ãã ã•ã„",
            required: true,
            next: 98
         },
         /////////10 äººé–“é–¢ä¿‚
         {
            id: 5,
            text: "ãã®äººã¯ã©ã‚“ãªäººã§ã™ã‹ï¼Ÿ",
            type: "radio",
            options: ["å®¶æ—", "è¦ªæ—", "è·å ´ã®ä¸Šå¸ã€éƒ¨ä¸‹ã€åŒåƒš", "å­¦æ ¡ã®å…ˆç”Ÿ", "å‹äººã‚„çŸ¥äºº", "ãã®ä»–"],
            type: "text",
            placeholder: "ãã®ä»–ã®å ´åˆã«å…¥åŠ›ã—ã¦ãã ã•ã„",
            required: true,
            next: 6
         },
         {
            id: 6,
            text: "ã©ã®ã‚ˆã†ãªã“ã¨ã§æ‚©ã‚“ã§ã¾ã™ã‹ï¼Ÿ",
            type: "text",
            required: true,
            next: 7
         },
         /////////10 äººé–“é–¢ä¿‚
         /////////20 å­è‚²ã¦
         {
            id: 7,
            text: "ãŠå­ã•ã‚“ã®æ€§åˆ¥ã¨å¹´é½¢ã‚’æ•™ãˆã¦ãã ã•ã„",
            fields: [
               { label: "æ€§åˆ¥ã‚’æ•™ãˆã¦ãã ã•ã„", type: "radio", id: "gender", options: ["ç”·ã®å­", "å¥³ã®å­"], required: true },
               { label: "å¹´é½¢ã‚’æ•™ãˆã¦ãã ã•ã„", type: "select", id: "age", options: ["é¸æŠã—ã¦ãã ã•ã„", "0æ‰", "1ï½3æ‰", "4ï½5æ‰", "6ï½9æ‰", "10ï½12æ‰", "ãã‚Œä»¥ä¸Š"], required: true },
            ],
            required: true,
            next: 8
         },
         {
            id: 8,
            text: "å›°ã£ã¦ã—ã¾ã†ç’°å¢ƒï¼ˆå ´æ‰€ï¼‰ã‚„ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’æ•™ãˆã¦ãã ã•ã„",
            type: "text",
            required: true,
            next: 9
         },
         /////////20 å­è‚²ã¦
         /////////30 æ•™è‚²
         {
            id: 9,
            text: "ï¼ˆæ•™è‚²ã«ã¤ã„ã¦ï¼‰ã©ã®ã‚ˆã†ã«æ‚©ã‚“ã§ã„ã‚‹ã®ã‹æ•™ãˆã¦ãã ã•ã„",
            type: "text",
            required: true,
            next: 10
         },
         {
            id: 10,
            text: "ãã®æ‚©ã¿ã¯ãŠå­ã•ã‚“ã®æ‚©ã¿ã§ã™ã‹ï¼Ÿ",
            type: "text",
            options: ["ã¯ã„", "ã„ã„ãˆ"],
            required: true,
            next: 11
         },
         /////////30 å­è‚²ã¦
         /////////40 ä»•äº‹
         {
            id: 11,
            text: "ï¼ˆä»•äº‹ï¼‰ã§ã©ã®ã‚ˆã†ãªã“ã¨ã«æ‚©ã¿ã‚„å›°ã£ã¦ã„ã¾ã™ã‹",
            options: ["çµŒå–¶", "äººæ", "å£²ã‚Šä¸Šã’", "èªçŸ¥", "ãã®ä»–"],
            type: "text",
            placeholder: "ãã®ä»–ã®å ´åˆã«å…¥åŠ›ã—ã¦ãã ã•ã„",
            required: true,
            next: 12
         },
         {
            id: 12,
            text: "ï¼ˆä»•äº‹ï¼‰ã§ã©ã®ã‚ˆã†ãªã“ã¨ã«æ‚©ã¿ã‚„å›°ã£ã¦ã„ã¾ã™ã‹",
            options: ["çµŒå–¶", "äººæ", "å£²ã‚Šä¸Šã’", "èªçŸ¥", "ãã®ä»–"],
            type: "text",
            placeholder: "ãã®ä»–ã®å ´åˆã«å…¥åŠ›ã—ã¦ãã ã•ã„",
            required: true,
            next: 13
         },
         {
            id: 13,
            text: "ãã®æ‚©ã¿ã¯ã©ã®ã‚ˆã†ã«ã€ã„ã¤ã¾ã§ã«è§£æ¶ˆã—ãŸã„ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
            type: "text",
            options: ["ç›´ãã«ã§ã‚‚", "2é€±é–“ä»¥å†…", "1ã‚«æœˆä»¥å†…", "ä»Šã˜ã‚ƒãªãã¦ã„ã„"],
            required: true,
            next: 14
         },
         {
            id: 14,
            text: "ãã®æ‚©ã¿ã¯ã©ã®ã‚ˆã†ã«ã€ã„ã¤ã¾ã§ã«è§£æ¶ˆã—ãŸã„ã¨æ€ã„ã¾ã™ã‹ï¼Ÿ",
            type: "text",
            options: ["ç›´ãã«ã§ã‚‚", "2é€±é–“ä»¥å†…", "1ã‚«æœˆä»¥å†…", "ä»Šã˜ã‚ƒãªãã¦ã„ã„"],
            required: true,
            next: 15
         },
         /////////40 ä»•äº‹
         {
            id: 15,
            text: "ãã®æ‚©ã‚“ã§ã„ã‚‹ã“ã¨ãŒã€ã©ã®æ§˜ã«ã€ã©ã‚“ãªé¢¨ã«ãªã‚‹ã¨å¬‰ã—ã„ã§ã™ã‹ï¼Ÿ",
            type: "text",
            required: true,
            next: 16
         },
         {
            id: 16,
            text: "ãã®æ‚©ã‚“ã§ã„ã‚‹ã“ã¨ãŒã€ã©ã®æ§˜ã«ã€ã©ã‚“ãªé¢¨ã«ãªã‚‹ã¨å¬‰ã—ã„ã§ã™ã‹ï¼Ÿ",
            type: "text",
            required: true,
            next: 17
         },
         {
            id: 17,
            text: "ãã®æ‚©ã‚“ã§ã„ã‚‹ã“ã¨ãŒã€ã©ã®æ§˜ã«ã€ã©ã‚“ãªé¢¨ã«ãªã‚‹ã¨å¬‰ã—ã„ã§ã™ã‹ï¼Ÿ",
            type: "text",
            required: true,
            next: 18
         },
         {
            id: 18,
            text: "ãã®æ‚©ã‚“ã§ã„ã‚‹ã“ã¨ãŒã€ã©ã®æ§˜ã«ã€ã©ã‚“ãªé¢¨ã«ãªã‚‹ã¨å¬‰ã—ã„ã§ã™ã‹ï¼Ÿ",
            type: "text",
            required: true,
            next: 19
         },
         {
            id: 19,
            text: "ãã®æ‚©ã‚“ã§ã„ã‚‹ã“ã¨ãŒã€ã©ã®æ§˜ã«ã€ã©ã‚“ãªé¢¨ã«ãªã‚‹ã¨å¬‰ã—ã„ã§ã™ã‹ï¼Ÿ",
            type: "text",
            required: true,
            next: 20
         },
         {
            id: 20,
            text: "ãã®æ‚©ã‚“ã§ã„ã‚‹ã“ã¨ãŒã€ã©ã®æ§˜ã«ã€ã©ã‚“ãªé¢¨ã«ãªã‚‹ã¨å¬‰ã—ã„ã§ã™ã‹ï¼Ÿ",
            type: "text",
            required: true,
            next: 98
         },
         {
            id: 98,
            text: "å†…å®¹ã®ç¢ºèªã¨ä¿®æ­£",
            text: "å›ç­”å†…å®¹ã«é–“é•ã„ã‚„ä¿®æ­£ã—ãŸã„ç®‡æ‰€ãŒã‚ã‚Œã°ä¿®æ­£ã—ã¦ãã ã•ã„ã€‚ï¼ˆä¿®æ­£ã®å¿…è¦ãŒãªã„å ´åˆã¯ãã®ã¾ã¾é€ä¿¡ã—ã¦ãã ã•ã„ã€‚ï¼‰",
            type: "radio",
            options: ["é€ä¿¡"],
            required: true,
            next: { "é€ä¿¡": 99 }
         },

         {
            id: 99,
            text: "ã”å›ç­”ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼",
            type: "message"
         }
      ];

      let currentQuestionIndex = 0;
let answers = [];
let historyStack = [];
let isEditing = false;
let editingQuestionId = null;

function loadQuestion(index) {
  const questionContainer = document.getElementById("questionContainer");
  questionContainer.innerHTML = "";

  const question = questions[index];
  if (!question) return;

  // âœ… ID98: ç¢ºèªç”»é¢
  if (question.id === 98) {
    const summaryList = document.createElement("div");
    summaryList.id = "summaryList";

    answers.forEach((ans, i) => {
      const originalQuestion = questions.find(q => q.id === ans.id || q.fields?.some(f => f.id === ans.id));
      if (!originalQuestion) return;

      const item = document.createElement("div");
      item.classList.add("summary-item");

      const qText = document.createElement("p");
      qText.innerHTML = `<strong>Q${originalQuestion.id}:</strong> ${ans.question}`;
      item.appendChild(qText);

      const aText = document.createElement("p");
      aText.innerHTML = `<strong>A:</strong> ${ans.answer}`;
      item.appendChild(aText);

      const editBtn = document.createElement("button");
      editBtn.textContent = "ä¿®æ­£";
      editBtn.onclick = () => {
        isEditing = true;
        editingQuestionId = ans.id;
        currentQuestionIndex = questions.findIndex(q => q.id === originalQuestion.id);
        loadQuestion(currentQuestionIndex);
      };
      item.appendChild(editBtn);

      summaryList.appendChild(item);
    });

    questionContainer.appendChild(summaryList);

    const finalText = document.createElement("p");
    finalText.textContent = "å†…å®¹ã«é–“é•ã„ãŒãªã‘ã‚Œã°ã€é€ä¿¡ã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãã ã•ã„ã€‚";
    questionContainer.appendChild(finalText);

    ["ä¿®æ­£", "é€ä¿¡"].forEach(option => {
      const label = document.createElement("label");
      const input = document.createElement("input");
      input.type = "radio";
      input.name = "answer";
      input.value = option;
      label.appendChild(input);
      label.appendChild(document.createTextNode(option));
      questionContainer.appendChild(label);
    });

    document.getElementById("nextBtn").style.display = "inline-block";
    document.getElementById("prevBtn").style.display = "inline-block";

    return;
  }

  // é€šå¸¸ã®è³ªå•è¡¨ç¤º
  const questionText = document.createElement("p");
  questionText.innerHTML = question.text;
  questionContainer.appendChild(questionText);

  if (question.type === "radio") {
    question.options.forEach(option => {
      const label = document.createElement("label");
      const input = document.createElement("input");
      input.type = "radio";
      input.name = "answer";
      input.value = option;

      // ä»¥å‰ã®é¸æŠçŠ¶æ…‹ã®å¾©å…ƒ
      const existing = answers.find(ans => ans.id === question.id);
      if (existing && existing.answer === option) input.checked = true;

      label.appendChild(input);
      label.appendChild(document.createTextNode(option));
      questionContainer.appendChild(label);
    });
  } else if (question.type === "text") {
    const input = document.createElement("textarea");
    input.id = "textAnswer";

    const existing = answers.find(ans => ans.id === question.id);
    if (existing) input.value = existing.answer;

    questionContainer.appendChild(input);
  } else if (question.fields) {
    question.fields.forEach(field => {
      const wrapper = document.createElement("div");
      const label = document.createElement("label");
      label.textContent = field.label;
      wrapper.appendChild(label);

      const existing = answers.find(ans => ans.id === field.id);

      if (field.type === "text") {
        const input = document.createElement("input");
        input.type = "text";
        input.id = field.id;
        input.value = existing ? existing.answer : "";
        wrapper.appendChild(input);
      } else if (field.type === "radio") {
        field.options.forEach(option => {
          const radioLabel = document.createElement("label");
          const input = document.createElement("input");
          input.type = "radio";
          input.name = field.id;
          input.value = option;
          if (existing && existing.answer === option) input.checked = true;
          radioLabel.appendChild(input);
          radioLabel.appendChild(document.createTextNode(option));
          wrapper.appendChild(radioLabel);
        });
      } else if (field.type === "select") {
        const select = document.createElement("select");
        select.id = field.id;
        field.options.forEach(option => {
          const opt = document.createElement("option");
          opt.value = option;
          opt.textContent = option;
          if (existing && existing.answer === option) opt.selected = true;
          select.appendChild(opt);
        });
        wrapper.appendChild(select);
      }

      questionContainer.appendChild(wrapper);
    });
  }

  document.getElementById("nextBtn").style.display = "inline-block";
  document.getElementById("prevBtn").style.display = "inline-block";
}


function validateInputs(question) {
  if (question.fields) {
    return question.fields.every(field => {
      if (field.required) {
        if (field.type === "text") {
          return document.getElementById(field.id).value.trim() !== "";
        } else if (field.type === "radio") {
          return !!document.querySelector(`input[name="${field.id}"]:checked`);
        } else if (field.type === "select") {
          return document.getElementById(field.id).value !== "é¸æŠã—ã¦ãã ã•ã„";
        }
      }
      return true;
    });
  } else if (question.type === "radio") {
    return !!document.querySelector('input[name="answer"]:checked');
  } else if (question.type === "text") {
    return document.getElementById("textAnswer").value.trim() !== "";
  }
  return true;
}


function nextQuestion() {
  const currentQuestion = questions[currentQuestionIndex];
  if (!validateInputs(currentQuestion)) {
    alert("ã™ã¹ã¦ã®å¿…é ˆé …ç›®ã«å›ç­”ã—ã¦ãã ã•ã„ã€‚");
    return;
  }

  // å›ç­”ä¿å­˜
  if (currentQuestion.fields) {
    currentQuestion.fields.forEach(field => {
      let value = "";
      if (field.type === "text") {
        value = document.getElementById(field.id).value.trim();
      } else if (field.type === "radio") {
        const checked = document.querySelector(`input[name="${field.id}"]:checked`);
        value = checked ? checked.value : "";
      } else if (field.type === "select") {
        value = document.getElementById(field.id).value;
      }

      const entry = { id: field.id, type: field.type, question: field.label, answer: value };
      const index = answers.findIndex(ans => ans.id === field.id);
      if (index !== -1) {
        answers[index] = entry;
      } else {
        answers.push(entry);
      }
    });
  } else {
    const answerEntry = {
      id: currentQuestion.id,
      type: currentQuestion.type,
      question: currentQuestion.text,
      answer: ""
    };

    if (currentQuestion.type === "radio") {
      const selected = document.querySelector('input[name="answer"]:checked');
      answerEntry.answer = selected ? selected.value : "";
    } else if (currentQuestion.type === "text") {
      answerEntry.answer = document.getElementById("textAnswer").value.trim();
    }

    const index = answers.findIndex(ans => ans.id === answerEntry.id);
    if (index !== -1) {
      answers[index] = answerEntry;
    } else {
      answers.push(answerEntry);
    }
  }

  if (isEditing) {
    isEditing = false;
    editingQuestionId = null;
    currentQuestionIndex = questions.findIndex(q => q.id === 98);
    loadQuestion(currentQuestionIndex);
    return;
  }

  historyStack.push(currentQuestionIndex);

  let nextId = null;
  if (currentQuestion.next) {
    const answer = answers.find(ans => ans.id === currentQuestion.id);
    nextId = typeof currentQuestion.next === "object"
      ? currentQuestion.next[answer?.answer]
      : currentQuestion.next;
  }

  if (!nextId) {
    submitSurvey();
    displayThankYouMessage();
    return;
  }

  const nextIndex = questions.findIndex(q => q.id === nextId);
  if (nextIndex === -1) {
    alert("æ¬¡ã®è³ªå•ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
    return;
  }

  currentQuestionIndex = nextIndex;
  loadQuestion(currentQuestionIndex);
}


function prevQuestion() {
  if (historyStack.length === 0) return;
  currentQuestionIndex = historyStack.pop();

  const prevQuestion = questions[currentQuestionIndex];
  if (prevQuestion.fields) {
    prevQuestion.fields.forEach(field => {
      answers = answers.filter(ans => ans.id !== field.id);
    });
  } else {
    answers = answers.filter(ans => ans.id !== prevQuestion.id);
  }

  loadQuestion(currentQuestionIndex);
}


function displayThankYouMessage() {
  const questionContainer = document.getElementById("questionContainer");
  questionContainer.innerHTML = `
    <h2>ã”å›ç­”ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼</h2>
    <p>å†…å®¹ã®ç¢ºèªãŒã§ãæ¬¡ç¬¬ã€ãŠè¦‹ç©ã‚Šã‚’è¡Œã„ã¾ã™ã®ã§ã€2ï½3æ—¥ã»ã©ãŠå¾…ã¡ãã ã•ã„ã€‚</p>
    <button onclick="restartSurvey()">ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</button>
  `;
  document.getElementById("prevBtn").style.display = "none";
}


function restartSurvey() {
  currentQuestionIndex = 0;
  answers = [];
  historyStack = [];
  isEditing = false;
  editingQuestionId = null;
  loadQuestion(currentQuestionIndex);
}


function submitSurvey() {
  fetch(GAS_URL, {
    method: "POST",
    headers: {
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ answers })
  })
    .then(response => response.json())
    .then(data => {
      console.log("é€ä¿¡çµæœ:", data);
      if (data.status !== "success") {
        alert("é€ä¿¡ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦ãŠè©¦ã—ãã ã•ã„ã€‚");
      }
    })
    .catch(err => {
      console.error("é€ä¿¡ã‚¨ãƒ©ãƒ¼:", err);
      alert("é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ¥ç¶šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
    });
}


// ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¤ãƒ³ãƒ‰
document.addEventListener("DOMContentLoaded", () => {
  loadQuestion(currentQuestionIndex);
});

document.getElementById("surveyForm").addEventListener("submit", e => {
  e.preventDefault();
});


   </script>

</body>

</html>